<template>
    <lightning-card title="Costing Records">
        <!-- Show loading spinner -->
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading"></lightning-spinner>
        </template>

        <!-- Show costing records once loaded -->
        <template if:true={costingRecords}>
            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                <thead>
                    <tr>
                        <th>Field</th>
                        <template for:each={costingRecords} for:item="record">
                            <!-- Use only record.Id as key -->
                            <th key={record.Id}>{record.Name}</th>
                        </template>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>Cavity Guarantee</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Cavity_Guarantee__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>CIGA Search</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.CIGA_Search__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>EPC Elmhurst</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.EPC_Elmhurst__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>EPR Fee</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.EPR_fee__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>EWI</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.EWI__c}</td>
                        </template>
                    </tr>
                    <!-- <tr>
                        <th>Funder</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Funder__c}</td>
                        </template>
                    </tr> -->
                    <tr>
                        <th>Innovation Bead</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Innovation_Bead__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Land Registry</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Land_Registry__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Loft</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Loft__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Loft Guarantee</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Loft_Guarantee__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Mechanical Vents</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Mechanical_Vents__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Normal Bead</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Normal_Bead__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Retrofit Coordination</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Retrofit_Coodintation__c}	</td>
                        </template>
                    </tr>
                    <tr>
                        <th>RIR</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.RIR__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Survey Fee</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Survey_Fee__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>Tech Survey</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.Tech_Survey__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>TM Amendment</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.TM_Amendment__c}</td>
                        </template>
                    </tr>
                    <tr>
                        <th>TM Lodgement</th>
                        <template for:each={costingRecords} for:item="record">
                            <td key={record.Id}>{record.TM_Lodgement__c}</td>
                        </template>
                    </tr>
                </tbody>
            </table>
        </template>

        <!-- Show error if there is an error -->
        <template if:true={error}>
            <p class="slds-text-color_error">Error: {error.body.message}</p>
        </template>
    </lightning-card>
</template>
